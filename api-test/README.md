# ğŸ§ª API Test - Redis ê°€ì§œ ë°ì´í„° í…ŒìŠ¤íŠ¸ í™˜ê²½

## ğŸ“‹ ê°œìš”

ì´ í´ë”ëŠ” **ì‹¤ì œ DB ëŒ€ì‹  Redisë¥¼ ì‚¬ìš©í•˜ì—¬ APIë¥¼ í…ŒìŠ¤íŠ¸**í•˜ëŠ” í™˜ê²½ì…ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ì‚¬ìš©ì    â”‚ â”€â”€â–¶ â”‚    API      â”‚ â”€â”€â–¶ â”‚   Redis     â”‚
â”‚  (Client)   â”‚     â”‚  (FastAPI)  â”‚     â”‚ (ê°€ì§œ ë°ì´í„°) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ í´ë” êµ¬ì¡°

```
api-test/
â”œâ”€â”€ README.md              # ì´ íŒŒì¼
â”œâ”€â”€ mock-data/             # ê°€ì§œ ë°ì´í„° (JSON)
â”‚   â”œâ”€â”€ todos.json         # í•  ì¼ í…ŒìŠ¤íŠ¸ ë°ì´í„°
â”‚   â”œâ”€â”€ users.json         # ì‚¬ìš©ì í…ŒìŠ¤íŠ¸ ë°ì´í„°
â”‚   â””â”€â”€ apartments.json    # ì•„íŒŒíŠ¸ í…ŒìŠ¤íŠ¸ ë°ì´í„° (51ê°œ í•œê¸€ ë°ì´í„°)
â””â”€â”€ scripts/
    â””â”€â”€ load_mock_data.py  # ê°€ì§œ ë°ì´í„° â†’ Redis ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸
```

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### ì‹¤ì œ ìš´ì˜ í™˜ê²½ (DB ìˆ˜ì • ì™„ë£Œ í›„)
```
ì‚¬ìš©ì â†’ API â†’ DB (PostgreSQL) â†’ API â†’ ì‚¬ìš©ì
```

### í˜„ì¬ í…ŒìŠ¤íŠ¸ í™˜ê²½ (DB ìˆ˜ì • ì¤‘)
```
ì‚¬ìš©ì â†’ API â†’ Redis ìºì‹œ (ë”ë¯¸ ë°ì´í„°) â†’ API â†’ ì‚¬ìš©ì
```

**ì¤‘ìš”**: í˜„ì¬ DBê°€ ìˆ˜ì • ì¤‘ì´ë¯€ë¡œ, ì‹¤ì œ DB êµ¬ì¡°ì™€ ë™ì¼í•œ í˜•ì‹ì˜ ë”ë¯¸ ë°ì´í„°ë¥¼ Redisì— ì €ì¥í•˜ì—¬ APIë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.
ìì„¸í•œ ë‚´ìš©ì€ [ì•„í‚¤í…ì²˜ ë¬¸ì„œ](../docs/architecture-redis-cache.md)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. Redis ì‹¤í–‰

```bash
# test-web í´ë”ì—ì„œ
docker-compose up -d redis
```

### 2. ê°€ì§œ ë°ì´í„° ë¡œë“œ

```bash
cd api-test/scripts
python load_mock_data.py
```

ì¶œë ¥ ì˜ˆì‹œ:
```
[OK] Redis ì—°ê²° ì„±ê³µ!
[OK] todos.json ë¡œë“œ ì™„ë£Œ (6ê°œ í•­ëª©)
[OK] users.json ë¡œë“œ ì™„ë£Œ (2ê°œ í•­ëª©)
[OK] apartments.json ë¡œë“œ ì™„ë£Œ (51ê°œ í•­ëª©)

[SUCCESS] ì´ 3ê°œ ë°ì´í„°ì…‹ ë¡œë“œ ì™„ë£Œ!
```

### 3. Backend ì„œë²„ ì‹¤í–‰

```bash
cd ../backend
pip install -r requirements.txt
uvicorn app.main:app --reload
```

### 4. API í…ŒìŠ¤íŠ¸

ë¸Œë¼ìš°ì €ì—ì„œ Swagger UI ì—´ê¸°:
- http://localhost:8000/docs

ë˜ëŠ” curlë¡œ í…ŒìŠ¤íŠ¸:
```bash
# í—¬ìŠ¤ ì²´í¬
curl http://localhost:8000/api/v1/test/health

# í•  ì¼ ëª©ë¡ ì¡°íšŒ
curl http://localhost:8000/api/v1/test/todos

# ì•„íŒŒíŠ¸ ê²€ìƒ‰ (ê°€ê²© í•„í„°)
curl "http://localhost:8000/api/v1/test/apartments?min_price=700000000&max_price=900000000"
```

## ğŸ“ í…ŒìŠ¤íŠ¸ API ì—”ë“œí¬ì¸íŠ¸

### í…ŒìŠ¤íŠ¸ API (`/api/v1/test/`)

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| GET | `/api/v1/test/health` | í—¬ìŠ¤ ì²´í¬ (Redis ì—°ê²° í™•ì¸) |
| GET | `/api/v1/test/todos` | ëª¨ë“  í•  ì¼ ì¡°íšŒ |
| GET | `/api/v1/test/todos/{id}` | íŠ¹ì • í•  ì¼ ì¡°íšŒ |
| POST | `/api/v1/test/todos` | í•  ì¼ ìƒì„± |
| PUT | `/api/v1/test/todos/{id}` | í•  ì¼ ìˆ˜ì • |
| DELETE | `/api/v1/test/todos/{id}` | í•  ì¼ ì‚­ì œ |
| GET | `/api/v1/test/apartments` | ì•„íŒŒíŠ¸ ëª©ë¡ (í•„í„°ë§ ì§€ì›) |
| GET | `/api/v1/test/apartments/{id}` | íŠ¹ì • ì•„íŒŒíŠ¸ ì¡°íšŒ |
| GET | `/api/v1/test/users` | ì‚¬ìš©ì ëª©ë¡ |
| GET | `/api/v1/test/users/{id}` | íŠ¹ì • ì‚¬ìš©ì ì¡°íšŒ |

### ê²€ìƒ‰ API (`/api/v1/search/`) - Redis ìºì‹œ ì‚¬ìš©

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| GET | `/api/v1/search/apartments?q={ê²€ìƒ‰ì–´}&limit={ê°œìˆ˜}` | ì•„íŒŒíŠ¸ëª… ê²€ìƒ‰ (ìë™ì™„ì„±) |

**ì˜ˆì‹œ**:
```bash
# "ë˜ë¯¸ì•ˆ" ê²€ìƒ‰ (ìµœëŒ€ 10ê°œ)
curl "http://localhost:8000/api/v1/search/apartments?q=ë˜ë¯¸ì•ˆ&limit=10"

# "ê°•ë‚¨" ê²€ìƒ‰ (ìµœëŒ€ 20ê°œ)
curl "http://localhost:8000/api/v1/search/apartments?q=ê°•ë‚¨&limit=20"
```

**ì‘ë‹µ í˜•ì‹** (ì‹¤ì œ DB ì‘ë‹µê³¼ ë™ì¼):
```json
{
  "success": true,
  "data": {
    "results": [
      {
        "apt_id": 1,
        "apt_name": "ë˜ë¯¸ì•ˆ ê°•ë‚¨íŒŒí¬",
        "address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 123-45",
        "sigungu_name": "ê°•ë‚¨êµ¬",
        "dong_name": "ì—­ì‚¼ë™",
        "location": {
          "lat": 37.5012,
          "lng": 127.0375
        }
      }
    ]
  },
  "meta": {
    "query": "ë˜ë¯¸ì•ˆ",
    "count": 1
  }
}
```

## ğŸ”§ ê°€ì§œ ë°ì´í„° ì»¤ìŠ¤í„°ë§ˆì´ì§•

`mock-data/` í´ë”ì˜ JSON íŒŒì¼ì„ ìˆ˜ì •í•˜ì—¬ í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### todos.json ì˜ˆì‹œ
```json
{
  "todos": [
    {
      "id": "todo-001",
      "title": "í”„ë¡œì íŠ¸ ê¸°íš ì™„ë£Œ",
      "completed": true,
      "priority": "high",
      "created_at": "2026-01-10T09:00:00Z",
      "updated_at": "2026-01-11T14:30:00Z"
    }
  ]
}
```

ë°ì´í„° ìˆ˜ì • í›„ ë‹¤ì‹œ ë¡œë“œ:
```bash
python load_mock_data.py
```

## ğŸ—‘ï¸ ë°ì´í„° ì´ˆê¸°í™”

Redis ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ë ¤ë©´:
```bash
python load_mock_data.py --clear
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

- ì´ í…ŒìŠ¤íŠ¸ í™˜ê²½ì€ **ê°œë°œ/í…ŒìŠ¤íŠ¸ ìš©ë„**ì…ë‹ˆë‹¤.
- í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
- Redisê°€ ì‹¤í–‰ ì¤‘ì´ì§€ ì•Šìœ¼ë©´ Mock ëª¨ë“œë¡œ ë™ì‘í•©ë‹ˆë‹¤ (ê¸°ë³¸ ì‘ë‹µ ë°˜í™˜).

## ğŸ“Š ë”ë¯¸ ë°ì´í„° ì •ë³´

### apartments.json
- **ì´ 51ê°œ** í•œê¸€ ì•„íŒŒíŠ¸ ë°ì´í„°
- ì‹¤ì œ DB êµ¬ì¡°ì™€ ë™ì¼í•œ í•„ë“œ ì‚¬ìš© (`apt_id`, `apt_name`, `sigungu_name`, `dong_name`, `latitude`, `longitude` ë“±)
- ì„œìš¸, ê²½ê¸°, ë¶€ì‚°, ëŒ€êµ¬, ê´‘ì£¼, ì¸ì²œ ë“± ë‹¤ì–‘í•œ ì§€ì—­ í¬í•¨
- ì‹¤ì œ ì•„íŒŒíŠ¸ëª…ê³¼ ìœ ì‚¬í•œ í•œê¸€ ì´ë¦„ ì‚¬ìš© (ë˜ë¯¸ì•ˆ, íìŠ¤í…Œì´íŠ¸, ìì´, ì•„í¬ë¡œ, íŠ¸ë¦¬ë§ˆì œ ë“±)

### ë°ì´í„° êµ¬ì¡°
```json
{
  "apartments": [
    {
      "apt_id": 1,
      "apt_name": "ë˜ë¯¸ì•ˆ ê°•ë‚¨íŒŒí¬",
      "address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 123-45",
      "sigungu_code": "11680",
      "sigungu_name": "ê°•ë‚¨êµ¬",
      "dong_name": "ì—­ì‚¼ë™",
      "latitude": 37.5012,
      "longitude": 127.0375,
      "total_units": 850,
      "build_year": 2018,
      "created_at": "2024-01-01T00:00:00Z",
      "updated_at": "2024-01-01T00:00:00Z"
    }
  ]
}
```

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- [PRD (Product Requirements Document)](../docs/prd.md)
- [Redis ìºì‹œ ì•„í‚¤í…ì²˜ ì„¤ëª…](../docs/architecture-redis-cache.md) â­ **ìƒˆë¡œ ì¶”ê°€ë¨**
- [API ê°œë°œ ê°€ì´ë“œ](../backend/docs/api_development.md)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](../backend/docs/project_structure.md)
